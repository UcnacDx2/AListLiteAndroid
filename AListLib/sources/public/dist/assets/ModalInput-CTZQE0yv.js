import{X as m,T as v,E as n,aR as w,aS as M,aT as x,q as C,aU as T,S as o,bW as I,bo as k,df as S,aW as E,a8 as b,aX as R,bp as y,x as F,an as $}from"./index-Bl5KfUKm.js";const O=e=>{var s;const[r,d]=m((s=e.defaultValue)!=null?s:""),[u,g]=m(""),i=C();let a;const c=()=>{const t=r().lastIndexOf(".");setTimeout(()=>{t>0&&e.isRenamingFile?a.setSelectionRange(0,t):a.select()},10)};v(()=>{a&&(a.focus(),c()),$(()=>{a&&a.setSelectionRange(0,0)})}),v(()=>{e.opened||d("")});const h=()=>{var t;if(e.validateFilename){const l=y(r());if(!l.valid){F.warning(i("global.".concat(l.error)));return}}else if(!r()||r().trim().length===0){F.warning(i("global.empty_input"));return}(t=e.onSubmit)==null||t.call(e,r())},f=t=>{if(d(t),e.validateFilename){const l=y(t);g(l.valid?"":l.error||"")}else g("")};return n(R,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[n(w,{}),n(M,{onDrop:t=>{var l;return(l=e.onDrop)==null?void 0:l.call(e,t,d)},get children(){return[n(x,{get children(){return i(e.title)}}),n(T,{get children(){return[n(o,{get when(){return e.topSlot},get children(){return e.topSlot}}),n(o,{get when(){return e.type==="text"},get fallback(){return n(k,{id:"modal-input",get type(){return e.type},get value(){return r()},ref:t=>a=t,get invalid(){return!!u()},onInput:t=>{f(t.currentTarget.value)},onFocus:c,onKeyDown:t=>{t.key==="Enter"&&h()}})},get children(){return n(I,{id:"modal-input",get value(){return r()},ref:t=>a=t,get invalid(){return!!u()},onInput:t=>{f(t.currentTarget.value)},onFocus:c})}}),n(o,{get when(){return u()},get children(){return n(S,{color:"$danger9",get children(){return i("global.".concat(u()))}})}}),n(o,{get when(){return e.tips},get children(){return n(S,{get children(){return e.tips}})}}),n(o,{get when(){return e.bottomSlot},get children(){return e.bottomSlot}})]}}),n(E,{display:"flex",gap:"$2",get children(){return[n(o,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),n(b,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return i("global.cancel")}}),n(b,{get loading(){return e.loading},onClick:()=>h(),get children(){return i("global.ok")}})]}})]}})]}})};export{O as M};
