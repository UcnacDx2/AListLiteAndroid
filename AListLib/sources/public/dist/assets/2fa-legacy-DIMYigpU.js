System.register(["./index-legacy-BzvznpU_.js"],function(e,r){"use strict";var t,n,a,u,s,c,i,o,g,l,d,h,f,y,b,p,x,v,w,_,k;return{setters:[e=>{t=e.k,n=e.b7,a=e.bq,u=e.X,s=e.E,c=e.S,i=e.a7,o=e.c1,g=e.q,l=e.aC,d=e.a1,h=e.a6,f=e.aw,y=e.bo,b=e.a8,p=e.af,x=e.W,v=e.x,w=e.bt,_=e.b9,k=e.dd}],execute:function(){e("default",()=>{const{back:e}=t(),[r,m]=n(()=>a.post("/auth/2fa/generate")),q=g(),[$,S]=u(),[C,E]=u("");(async()=>{if(x().otp)return v.warning(q("users.2fa_already_enabled")),void e();const r=await m();w(r,S)})();const[I,W]=n(()=>a.post("/auth/2fa/verify",{code:C(),secret:$()?.secret})),j=async()=>{const r=await W();_(r,()=>{k({...x(),otp:!0}),e()})};return s(p,{get loading(){return r()},get children(){return s(c,{get when(){return $()},get children(){return s(i,{spacing:"$2",alignItems:"start",get children(){return[s(o,{get children(){return q("users.scan_qr")}}),s(l,{boxSize:"$xs",rounded:"$lg",get src(){return $()?.qr}}),s(o,{get children(){return[d(()=>q("users.or_manual")),":"," ",s(h,{get color(){return f()},get children(){return $()?.secret}})]}}),s(y,{maxW:"$xs",get placeholder(){return q("users.input_code")},get value(){return C()},onInput:e=>E(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&j()}}),s(b,{get loading(){return I()},onClick:j,get children(){return q("users.verify")}})]}})}})}})})}}});
