System.register(["./index-legacy-BzvznpU_.js","./index-legacy-Dlq_vK-8.js","./Common-legacy-BjPiicdg.js","./FolderTree-legacy-Dyjn4je6.js","./useTitle-legacy-bcKFIeMP.js","./index-legacy-QH22Qod0.js","./index-legacy-moMaHu9d.js","./SettingItem-legacy-CqXPZP9T.js","./item_type-legacy-BFH7Oxl9.js","./ResponsiveGrid-legacy-Bs3dvwiZ.js"],function(e,t){"use strict";var n,r,a,i,s,o,l,d,c,u,g,h,m,f,p,x,y,b,k,v,w,_,C,$,j,S,I,T,N,z,E,M,B,D,F,G,Q;return{setters:[e=>{n=e.ap,r=e.dE,a=e.X,i=e.b7,s=e.bq,o=e.dF,l=e.dG,d=e.aQ,c=e.E,u=e.q,g=e.c1,h=e.ao,m=e.aE,f=e.a7,p=e.a6,x=e.a1,y=e.cD,b=e.cQ,k=e.S,v=e.Q,w=e.a8,_=e.aR,C=e.aS,$=e.bu,j=e.aT,S=e.aU,I=e.bW,T=e.bo,N=e.aW,z=e.aX,E=e.bt,M=e.b9,B=e.bE,D=e.bR},e=>{F=e.G},e=>{G=e.default},e=>{Q=e.a},null,null,null,null,null,null],execute:function(){var t=n('<svg width=1em height=1em viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-width=2><path stroke-dasharray=60 stroke-dashoffset=60 stroke-opacity=.3 d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill=freeze attributeName=stroke-dashoffset dur=1.3s values=60;0></animate></path><path stroke-dasharray=15 stroke-dashoffset=15 d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill=freeze attributeName=stroke-dashoffset dur=0.3s values=15;0></animate><animateTransform attributeName=transform dur=1.5s repeatCount=indefinite type=rotate values="0 12 12;360 12 12">'),R=n('<svg width=1em height=1em viewBox="0 0 24 24"><g stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path fill=currentColor fill-opacity=0 stroke-dasharray=60 stroke-dashoffset=60 d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"><animate fill=freeze attributeName=stroke-dashoffset dur=0.5s values=60;0></animate><animate fill=freeze attributeName=fill-opacity begin=0.8s dur=0.15s values=0;0.3></animate></path><path fill=none stroke-dasharray=14 stroke-dashoffset=14 d="M8 12L11 15L16 10"><animate fill=freeze attributeName=stroke-dashoffset begin=0.6s dur=0.2s values=14;0>');function X(e){return n=t(),r(n,e,!0,!0),n;var n}function q(e){return t=R(),r(t,e,!0,!0),t;var t}const L=()=>{const e=u(),[t,n]=a(),[r,B]=i(()=>s.get("/admin/index/progress")),[D,Q]=a(),R=e=>{D()&&clearTimeout(D()),Q(e?window.setTimeout(L,5e3):void 0)},L=async()=>{const e=await B();E(e,e=>{n(e),R(!e.is_done)},(e,t)=>{R(404!==t)})};L();const[O,W]=i(o),Z=async()=>{const e=await W();M(e),L()},[J,U]=i(()=>s.post("/admin/index/clear")),A=async()=>{const e=await U();M(e),L()},[H,K]=i(()=>s.post("/admin/index/stop")),P=async()=>{const e=await K();M(e),L()};let V,Y;const[ee,te]=i(l),ne=async()=>{let e=[];V.value&&(e=V.value.split("\n"));let t=20;Y.value&&(t=parseInt(Y.value));const n=await te(e,t);M(n),L()},{isOpen:re,onOpen:ae,onClose:ie}=d();return[c(g,{get children(){return e("indexes.index_header")}}),c(G,{get group(){return F.INDEX}}),c(g,{get children(){return e("indexes.current")}}),c(k,{get when(){return t()},get children(){return c(h,{spacing:"$2",w:"fit-content",shadow:"$md",rounded:"$lg",get bg(){return v("","$neutral3")()},get children(){return[c(m,{boxSize:"$28",color:"$accent9",p:"$2",get as(){return t()?.is_done?q:X}}),c(f,{spacing:"$2",flex:"1",alignItems:"start",mr:"$2",get children(){return[c(p,{get children(){return[x(()=>e("indexes.obj_count")),":",c(y,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(p,{get children(){return[x(()=>e("indexes.last_done_time")),":",c(y,{colorScheme:"accent",ml:"$2",get children(){return x(()=>!!t().last_done_time)()?b(t().last_done_time):e("indexes.unknown")}})]}}),c(k,{get when(){return t()?.error},get children(){return c(p,{css:{wordBreak:"break-all"},get children(){return[x(()=>e("indexes.error")),":",c(y,{colorScheme:"danger",ml:"$2",get children(){return t().error}})]}})}})]}})]}})}}),c(h,{spacing:"$2",get children(){return[c(w,{colorScheme:"accent",onClick:[L,void 0],get loading(){return r()},get children(){return e("global.refresh")}}),c(w,{colorScheme:"danger",onClick:[A,void 0],get loading(){return J()},get children(){return e("indexes.clear")}}),c(w,{colorScheme:"warning",onClick:[P,void 0],get loading(){return H()},get children(){return e("indexes.stop")}}),c(w,{onClick:[Z,void 0],get loading(){return O()},get children(){return e("indexes."+(t()?.is_done?"rebuild":"build"))}})]}}),c(w,{onClick:ae,get children(){return e("indexes.update")}}),c(z,{get opened(){return re()},onClose:ie,get children(){return[c(_,{}),c(C,{get children(){return[c($,{}),c(j,{get children(){return e("indexes.update")}}),c(S,{get children(){return[c(g,{get children(){return e("indexes.paths_to_update")}}),c(I,{ref(e){"function"==typeof V?V(e):V=e}}),c(g,{get children(){return e("indexes.max_depth")}}),c(T,{value:20,type:"number",ref(e){"function"==typeof Y?Y(e):Y=e}})]}}),c(N,{get children(){return c(w,{onClick:[ne,void 0],get loading(){return ee()},get children(){return e("indexes.update")}})}})]}})]}})]},O=()=>{const e=u(),[t,n]=a(),[r,o]=i(()=>s.get("/admin/scan/progress")),[l,d]=a(),h=e=>{l()&&clearTimeout(l()),d(e?window.setTimeout(m,5e3):void 0)},m=async()=>{const e=await o();E(e,e=>{n(e),h(!e.is_done)},()=>{h(!0)})};m();const[b,_]=i(()=>s.post("/admin/scan/stop")),C=async()=>{const e=await _();M(e),m()},[$,j]=a("/"),[S,I]=a(0),[N,z]=i(()=>s.post("/admin/scan/start",{path:$(),limit:S()}));return[c(g,{get children(){return e("indexes.scan_header")}}),c(k,{get when(){return t()},get children(){return c(f,{alignItems:"start",spacing:"$2",w:"fit-content",p:"$2",shadow:"$md",rounded:"$lg",get bg(){return v("","$neutral3")()},get children(){return[c(p,{get children(){return[x(()=>e("indexes.task_status")),":",c(y,{get colorScheme(){return t()?.is_done?"accent":"success"},ml:"$2",get children(){return x(()=>!!t()?.is_done)()?e("indexes.idle"):e("indexes.running")}})]}}),c(p,{get children(){return[x(()=>e("indexes.obj_count")),":",c(y,{colorScheme:"info",ml:"$2",get children(){return t()?.obj_count}})]}}),c(w,{colorScheme:"danger",onClick:C,get loading(){return b()},get disabled(){return t()?.is_done},get children(){return e("indexes.stop")}})]}})}}),c(D,{w:"100%",display:"flex",flexDirection:"column",get children(){return[c(B,{display:"flex",alignItems:"center",get children(){return e("indexes.path_to_scan")}}),c(Q,{get value(){return $()},onChange:e=>j(e)}),c(B,{display:"flex",alignItems:"center",get children(){return e("indexes.rate_limit")}}),c(T,{type:"number",get value(){return S()},step:.1,onInput:e=>I(parseFloat(e.currentTarget.value))})]}}),c(w,{colorScheme:"info",onClick:async()=>{const e=await z();M(e),m()},get loading(){return N()},get children(){return e("indexes.start")}})]};e("default",()=>c(f,{spacing:"$2",w:"$full",alignItems:"start",get children(){return[c(L,{}),c(O,{})]}}))}}});
