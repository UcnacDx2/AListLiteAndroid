System.register(["./index-legacy-BzvznpU_.js","./icon-legacy-DKxdZoDZ.js","./List-legacy-D5_mt2hV.js","./index-legacy-QH22Qod0.js","./File-legacy-BQ8rW125.js","./Password-legacy-B4LjS6Wp.js","./helper-legacy-DwTNtj0A.js","./style-legacy-CAQ10iBS.js","./Layout-legacy-aLmqKbgj.js","./useTitle-legacy-bcKFIeMP.js","./FolderTree-legacy-Dyjn4je6.js","./index-legacy-DBa2Tzo0.js","./ModalInput-legacy-Cw9-SN51.js","./index-legacy-f2eHFB4O.js","./share-legacy-C9Fe59Iz.js","./index-legacy-moMaHu9d.js","./storage-legacy-BCAHdrPO.js"],function(e,r){"use strict";var t,n,l,i,a,c,o,s,u,d,g,h,p,m,w,f,b,j,y,$,_,k,v,x,C,O,P,S,z,A,E,I,L,F,M,U,T,q,J,R,G,N,B,H,K,Q,V,W,X,Y,Z,D,ee,re,te,ne,le,ie,ae,ce,oe,se;return{setters:[e=>{t=e.k,n=e.ac,l=e.b7,i=e.eh,a=e.ei,c=e.C,o=e.X,s=e.T,u=e.U,d=e.an,g=e.ej,h=e.E,p=e.P,m=e.J,w=e.K,f=e.a1,b=e.G,j=e.O,y=e.S,$=e.Z,_=e.$,k=e.a0,v=e.a6,x=e.q,C=e.a7,O=e.Y,P=e.aA,S=e.a2,z=e.ao,A=e.bs,E=e.af,I=e.ds,L=e.ek,F=e.bT,M=e.aE,U=e.aw,T=e.r,q=e.cE,J=e.cQ,R=e.N,G=e.am,N=e.bU,B=e.cH,H=e.aI,K=e.aO,Q=e.V,V=e.W,W=e._,X=e.aL},e=>{Y=e.O,Z=e.g},e=>{D=e.L,ee=e.c},e=>{re=e.d,te=e.g},e=>{ne=e.g,le=e.O},e=>{ie=e.default},e=>{ae=e.u},e=>{ce=e.b,oe=e.x,se=e.w},null,null,null,null,null,null,null,null,null],execute:function(){const r=e=>{const{show:r}=ce({id:2}),{isMouseSupported:t}=ae(),n=()=>T.list_item_filename_overflow;return h(G.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return h(z,{class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:R()}},get cursor(){return t()?"default":"pointer"},"on:click":r=>{e.obj.is_dir?e.jumpCallback():!e.obj.is_dir&&e.onFileClick&&e.onFileClick()},onContextMenu:t=>{r(t,{props:e})},get children(){return[h(z,{class:"name-box",spacing:"$1",get w(){return ee[0].w},get children(){return[h(M,{class:"icon",boxSize:"$6",get color(){return U()},get as(){return Z(e.obj)},mr:"$1"}),h(v,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:"multi_line"===n()?"unset":"nowrap","overflow-x":"scrollable"===n()?"auto":"hidden",textOverflow:"ellipsis"===n()?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),h(v,{class:"size",get w(){return ee[1].w},get textAlign(){return ee[1].textAlign},get children(){return q(e.obj.size)}}),h(v,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return ee[2].w},get textAlign(){return ee[2].textAlign},get children(){return J(e.obj.modified)}})]}})}})},ue={extract:{icon:te,color:"$success9"},copy_link:{icon:re,color:"$info9"},download:{icon:X,color:"$primary9"}},de=()=>{const{copy:e}=N(),{colorMode:r}=B(),{isShare:n}=t();return h(se,{id:2,animation:"scale",get theme(){return"dark"!==r()?"light":"dark"},style:"z-index: var(--hope-zIndices-popover)",get children(){return[h(oe,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:e})=>{var r;r=e.url,window.open(r,"_blank")},get children(){return h(ge,{name:"download"})}}),h(oe,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:r})=>{e(r.url)},get children(){return h(ge,{name:"copy_link"})}}),h(oe,{hidden:()=>{const e=K.findIndex(e=>"decompress"===e);return!n()&&!Q.can(V(),e)},onClick:({props:e})=>{H.emit("extract",JSON.stringify({inner:e.innerPath,pass:e.pass}))},get children(){return h(ge,{name:"extract"})}})]}})},ge=e=>{const r=x();return h(z,{spacing:"$2",get children(){return[h(M,{get p(){return ue[e.name].p?"$1":void 0},get as(){return ue[e.name].icon},boxSize:"$7",get color(){return ue[e.name].color}}),h(v,{get children(){return r(`home.toolbar.${e.name}`)}})]}})};e("default",()=>{const e=x(),{pathname:M}=t(),{rawLink:U}=n(),[T,q]=l(i),[J,R]=l(a),G=c(()=>T()||J());let N="",B="",H="",K=null;const[Q,V]=o(""),[X,Z]=o(!1),[ee,re]=o(!1),[te,ae]=o(""),[ce,oe]=o([]),[se,ue]=o(),[ge,he]=o(!1),[pe,me]=o(""),[we,fe]=o(""),[be,je]=o(""),ye=function(){let e=!1,r=[];return{acquire:()=>new Promise(t=>{e?r.push(t):(e=!0,t())}),release:()=>{r.length>0?r.shift()():e=!1}}}(),$e=e=>{let r={};return e.forEach(e=>{r[e.name]={...e,children:e.children?$e(e.children):null}}),r},_e=e=>200!==e.code&&(202===e.code?F(()=>{""!==N&&Z(!0),re(!0),V("")}):V(e.message),!0),ke=async e=>{if(await ye.acquire(),ee()&&""===N)return ye.release(),[];if(""===B){const e=await q(M(),W(),N);if(_e(e))return ye.release(),[];if(null!==e.data.content&&(K=$e(e.data.content)),B=e.data.raw_url,H=e.data.sign,ae(e.data.comment),void 0!==e.data.sort){let r;""!==e.data.sort.order_by&&(r=e.data.sort.order_by);let t="desc"===e.data.sort.order_direction,n=e.data.sort.extract_folder;F(()=>{ue(r),he(t),me(n)})}if(e.data.encrypted&&""===N)return F(()=>{re(!0),V("")}),ye.release(),[]}if(null===K){const e=await R(M(),W(),N,"/");if(_e(e))return ye.release(),[];K=$e(e.data.content)}let r=K;for(let t=0;t<e.length;t++){if(null===r[e[t]].children){const n=await R(M(),W(),N,"/"+e.slice(0,t+1).join("/"));if(_e(n))return ye.release(),[];r[e[t]].children=$e(n.data.content)}r=r[e[t]].children}return F(()=>{re(!1),Z(!1),V("")}),ye.release(),Object.values(r)},[ve,xe]=o([]);s(()=>{ke(ce()).then(e=>xe(e))});const Ce=()=>{ke(ce()).then(e=>xe(e))};Ce();const Oe=()=>{let e=ve();se()&&(e=e.sort((e,r)=>(ge()?-1:1)*L(e[se()],r[se()])));let r=pe();if(""!==r){let t=[],n=[];e.forEach(e=>(e.is_dir?t:n).push(e)),e="front"===r?t.concat(n):n.concat(t)}return e},Pe=e=>{const r=ce().length>0?"/"+ce().join("/"):"";return{...e,sign:H,inner_path:r,archive:Ie}},Se=(e,r)=>{F(()=>{me(""),ue(e),void 0!==r&&he(r)})},ze=c(()=>Oe().filter(e=>!e.is_dir).map(e=>Pe(e))),Ae=c(()=>{const e=ze().find(e=>e.name===we());return e?ne({...e,provider:u.provider}):[]}),Ee=c(()=>{const e=Ae();if(0===e.length)return null;if(be()){const r=e.find(e=>e.name===be());if(r)return r}return e[0]}),Ie={...u.obj,inner_path:void 0,archive:void 0},Le=u.raw_url,Fe=e=>{F(()=>{if(""===e)g.setObj(Ie),g.setRawUrl(Le),fe("");else{const r=ze().find(r=>r.name===e);if(r){const t=U(r);g.setObj(r),g.setRawUrl(t),fe(e)}}})};return d(()=>{g.setObj(Ie),g.setRawUrl(Le)}),s(()=>{we(),je("")}),h(C,{spacing:"$2",w:"$full",get children(){return[h(p,{pl:"$2",pr:"$2",w:"$full",get children(){return[h(m,{get children(){return h(w,{get currentPage(){return f(()=>0===ce().length)()&&!we()},"on:click":()=>{oe([]),Fe("")},children:"."})}}),h(b,{get each(){return ce()},children:(e,r)=>h(m,{get children(){return[h(j,{}),h(w,{get currentPage(){return f(()=>ce().length===r()+1)()&&!we()},"on:click":()=>{oe(ce().slice(0,r()+1)),Fe("")},children:e})]}})}),h(y,{get when(){return we()},get children(){return h(m,{get children(){return[h(j,{}),h(w,{currentPage:!0,get children(){return we()}})]}})}})]}}),h($,{get children(){return[h(_,{get when(){return""!==Q()},get children(){return h(k,{get msg(){return Q()},disableColor:!0})}}),h(_,{get when(){return ee()},get children(){return h(ie,{get title(){return e("home.toolbar.archive.input_password")},password:()=>N,setPassword:e=>N=e,enterCallback:()=>Ce(),get children(){return h(y,{get when(){return X()},get children(){return h(v,{color:"$danger9",get children(){return e("home.toolbar.archive.incorrect_password")}})}})}})}}),h(_,{get when(){return f(()=>!ee())()&&""===Q()},get children(){return h(y,{get when(){return we()},get fallback(){return h(E,{get loading(){return G()},get children(){return h(C,{class:"list",w:"$full",spacing:"$1",get children(){return[h(D,{sortCallback:Se,disableCheckbox:!0}),h(b,{get each(){return Oe()},children:(e,t)=>{const n=Pe(e);let l=e.is_dir?void 0:U(n),i=(a=e.name,(ce().length>0?"/"+ce().join("/"):"")+"/"+a);var a;return h(r,{obj:e,get index(){return t()},jumpCallback:()=>oe(ce().concat(e.name)),innerPath:i,url:l,pass:N,onFileClick:()=>Fe(e.name)})}}),h(de,{})]}})}})},get children(){return h(y,{get when(){return we()},get fallback(){return h(S,{})},get children(){return h(C,{w:"$full",spacing:"$2",alignItems:"center",get children(){return[h(y,{get when(){return Ee()},get children(){return h(O,{get fallback(){return h(S,{})},get children(){return h(P,{get component(){return Ee()?.component},get images(){return ze().filter(e=>e.type===Y.IMAGE)},navigate:e=>{Fe(e)}})}})}}),h(z,{w:"$full",justifyContent:"center",spacing:"$2",p:"$2",get children(){return[h(y,{get when(){return Ae().length>1},get children(){return h(A,{get value(){return Ee()?.name||""},onChange:e=>je(String(e)),get options(){return Ae().map(e=>({value:e.name,label:e.name}))}})}}),h(le,{get file(){return{name:we(),raw_url:u.raw_url,d_url:u.raw_url}}})]}})]}})}})}})}})]}}),h(y,{get when(){return""!==te()},get children(){return[h(I,{}),h(v,{w:"$full",pl:"$1",pr:"$1",get children(){return te()}})]}})]}})})}}});
